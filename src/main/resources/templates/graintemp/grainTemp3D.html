<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<html>
<head th:include="head::head(${title})">
</head>
<!--<link th:href="@{/3D/css/3dstyle.css}" rel="stylesheet" type="text/css"/>
<link th:href="@{/3D/css/tmp3dstyle.css}" rel="stylesheet" type="text/css"/>-->
<script th:src="@{/3D/js/a_svgvml3d_1.js}" type="text/javascript"></script>
<script th:src="@{/3D/js/a_boundingbox_2.js}" type="text/javascript"></script>
<link th:rel="stylesheet" type="text/css" th:href="@{/assets/css/comm/infoCheck.css}"/>
<body>
<form action="" method="post" id="formn1">
    <div id="div1" style="display: block">
        <input type="hidden" id="siteid" value=""/>
        <input type="hidden" id="xh" value=""/>
        <input type="hidden" id="storageid" value="}"/>
        <!-- <input type="hidden" id="sectionCount"
                th:value="${item.x}"/>
         <input type="hidden" id="layerCount" th:value="${item.z}"/>
         <input type="hidden" id="colCount" th:value="${item.y}"/>-->


        <p class="titile">
        <div style="line-height:15px; font-size:13px; font-family:'微软雅黑'; position: absolute;top:0px; left:20px; font-style:italic;"
             class="myfont">
            <!--<span style="font-weight: 900; font-size: 18px"
                  th:text="'&nbsp;'+${item.graindepot}+${item.house}+'号粮仓粮情信息'"></span>
        --></div>
        </p>
        <div>
            <div class="infoCheckBack">
                <table class="infoCheck-three" border="" cellspacing="" cellpadding="">
                    <tr>
                        <td class="infoCheck-name">品种</td>
                        <td class="infoCheck-content" th:text="${item.grainname}">品种</td>
                        <td class="infoCheck-name">气温(℃)</td>
                        <td class="infoCheck-content" th:text="${item.outtemprature}">气温</td>
                        <td class="infoCheck-name">气湿(%)</td>
                        <td class="infoCheck-content" th:text="${item.outhumidity}">气湿</td>
                        <td class="infoCheck-name">仓温(℃)</td>
                        <td class="infoCheck-content" th:text="${item.intemprature}">仓温</td>
                    </tr>
                    <tr>
                        <td class="infoCheck-name">仓湿(%)</td>
                        <td class="infoCheck-content" th:text="${item.inhumidity}">仓湿</td>
                        <td class="infoCheck-name">平均粮温(℃)</td>
                        <td class="infoCheck-content" th:text="${item.averagetemp}">平均粮温</td>
                        <td class="infoCheck-name">最高粮温(℃)</td>
                        <td class="infoCheck-content" th:text="${item.maxLw}">最高粮温</td>
                        <td class="infoCheck-name">最低粮温(℃)</td>
                        <td class="infoCheck-content" th:text="${item.minLw}">最低粮温</td>
                    </tr>
                </table>
            </div>
        </div>
        <div style="margin-top:10px;height: 300px">
            <div style="float: left;width: 50%;margin-top: -10px;">
                <embed width='600' height='600' name='Scene1'
                       src='/3D/js/a_scene.svg' wmode='transparent'
                       type='image/svg+xml'/>
            </div>
            <div style="float: left;width: 50%;margin-top: 30px;">
                <table border=0
                       style="margin-top: 0px; margin-right: 50px;">
                    <tr>
                        <td colspan="4">
                            <b style="font-size: 18px; " th:text="'仓房:'+${item.storagename}+',检测时间:'+${item.testdatestr}">粮库立体展示</b>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="4">
                            <a href="javascript:void(0);" onClick="ZoomPicture(1)">
                                <i class="icon-zoom-in bigger-130"></i>
                            </a>
                            <a href="javascript:void(0);" onClick="ZoomPicture(-1)">
                                <i class="icon-zoom-out bigger-130"></i>
                            </a>
                            <a href="javascript:void(0);"
                               onClick="ChangeViewer(0,5)">
                                <i class="icon-circle-arrow-right bigger-130"></i>
                            </a>
                            <a href="javascript:void(0);"
                               onClick="ChangeViewer(0,-5)">
                                <i class="icon-circle-arrow-left bigger-130"></i>
                            </a>
                            <a href="javascript:void(0);"
                               onClick="ChangeViewer(-10,0)">
                                <i class="icon-circle-arrow-up bigger-130"></i>
                            </a>
                            <a href="javascript:void(0);"
                               onClick="ChangeViewer(10,0)">
                                <i class="icon-circle-arrow-down bigger-130"></i>
                            </a>
                            <a href="javascript:void(0);" id="xuanzhuan"
                               onClick="clickxuanzhuan()">
                                <i class=" icon-repeat bigger-130"></i>
                            </a>
                        </td>

                    </tr>
                    <tr style="border-top: 1px solid black;border-bottom: 1px solid black;">
                        <td id="cengshuTd">
                            <b style="border-bottom: 1px solid black;">层数展示&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</b>
                            <p></p>
                        </td>
                        <td id="pingjunwen">
                            <b style="border-bottom: 1px solid black;">平均温度(℃)&nbsp&nbsp&nbsp&nbsp</b>
                            <p></p>
                        </td>
                        <td id="zuigaowen">
                            <b style="color: #FF7F24;border-bottom: 1px solid black;">最高温度(℃)&nbsp&nbsp&nbsp&nbsp</b>
                            <p></p>
                        </td>
                        <td id="zuidiwen">
                            <b style="color: blue;border-bottom: 1px solid black;">最低温度(℃)&nbsp&nbsp&nbsp&nbsp</b>
                            <p></p>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="4">
                            <div style="height:50px"><img
                                    src="/3D/images/sewentu.png"
                                    width="0%"
                                    height="50px"/>
                            </div>
                        </td>
                    </tr>

                </table>
            </div>
        </div>
    </div>

</form>
</body>
<style>
   /* v\: * {
        behavior: url(#default#VML);
    }

    * {
        maigin: 0px;
        padding: 0px;
        font-size: 14px;
    }

    p {
        margin: 5px 0;
    }

    .floor {
        height: 10px;
    }

    th {
        width: auto;
    }*/
</style>

<script th:inline="javascript">
    var item = [[${item}]]
    item.maxtemp = item.maxLw;
    item.mintemp = item.minLw;
    ;
    item.x = item.dim1;
    item.y = item.dim2;
    item.z = item.dim3;
    var arraylist = item.temperatureset.split(",");
    //0 4 8
    var transferList=[];
    for (var i=0;i<item.z;i++){
        for (var j=0;j<item.x*item.y;j++){
            transferList.push(arraylist[i+j*item.z])
        }

    }
    debugger
    arraylist=transferList



    $(document).ready(function () {
        if (parseFloat(item.maxtemp) > 50) {
            $("#maxLw").html("*");
        } else {
            $("#maxLw").html(item.maxtemp + "℃");
        }
        if (parseFloat(item.maxtemp) < 0) {
            $("#minLw").html("*");
        } else {
            $("#minLw").html(item.mintemp + "℃");
        }
    });

    function backto3d() {
        document.getElementById("div1").style.display = "";
        document.getElementById("div2").style.display = "none";
    }


    var orderno;
    var code;

    var i, j, xmin, xmax, n_x = 100, ymin, ymax, n_y = 100, zmin, zmax, x0, x1, y0, y1, z, x, y;
    //x轴开始的位置
    xmin = 0;
    xmax = 5;
    //y轴开始的位置
    ymin = 0;
    ymax = 5;
    //z轴开始的位置
    zmin = 0;
    zmax = 5;

    /**
     *根据某个日期查询某些批次---qlj
     */
    function chaxunpici() {
        $("#pici").focus();
        $.post("lq_findPici", {
            "siteid": $("#siteid").val(),
            "xh": $("#xh").val(),
            "mdate": $("#mdate").val()
        }, function (data) {
            var obj = data["mdateList"];
            $("#pici").empty();
            $("#pici").append("<option value='0'>请选择</option>");
            $.each(obj, function (key, val) {
                var t = val.time;
                t = t.replace("T", " ");
                $("#pici").append("<option value='" + t + "'  >" + t + "</option>");
            });
        }, "json");

    }


    $(function () {
        xmax = item.x;
        ymax = item.y;
        zmax = parseInt(item.z) + 1;
        //arraylist=[7.8,5.2,3.8,5.7,8.2,5.6,4.7,6.5,7.5,5.8,5.2,7.1,7.1,6.1,5.3,6.6,7.6,5.7,5.3,7.3,7.0,4.6,3.7,4.6,8.2,2.8,2.5,5.2,7.5,5.3,4.5,6.5,7.5,5.2,4.2,6.1,7.5,5.2,4.0,5.1,7.6,4.7,3.7,4.1,8.1,4.0,2.3,3.8,7.0,3.0,2.2,5.3,7.5,5.6,5.0,6.6,7.3,6.0,5.1,6.5,8.0,6.0,5.2,6.7,7.8,6.5,6.0,7.5,7.1,4.0,2.7,3.6,7.8,4.3,3.2,5.2,8.0,5.2,4.2,6.0,8.3,6.0,5.1,6.2,7.8,5.8,5.0,6.1,7.5,5.3,4.2,5.0,7.6,5.2,4.2,5.0,8.3,4.6,3.3,4.2,7.5,4.7,3.5,4.7,7.3,5.2,4.5,5.2,8.1,5.3,4.3,6.1,7.8,5.1,4.1,5.6,7.8,4.2,3.1,5.1,6.8,4.6,2.8,4.2,7.8,5.0,3.5,5.1,7.7,5.0,4.0,5.0,8.3,4.7,3.6,4.6,7.5,4.6,3.2,4.7,7.3,4.0,2.2,4.6,6.6,4.2,3.0,3.8,8.0,5.7,4.6,6.3,8.6,5.2,4.0,8.5,7.6,4.8,3.7,9.3,7.6,5.2,4.2,9.0,7.5,3.6,2.3,5.5,7.1,5.0,4.2,4.1,8.1,4.8,4.0,5.0,7.6,5.0,4.1,5.0,8.0,5.1,3.7,9.1,7.6,5.3,4.0,10.2,7.6,5.6,4.8,9.8,7.6,4.1,3.5,8.0,7.8,4.3,2.8,8.2,7.3,4.7,3.1,7.8,7.7,4.6,3.5,8.7,7.8,4.8,3.8,9.3,7.5,3.0,2.3,7.7,8.0,3.3,2.5,7.3,7.7,3.6,2.7,8.1,6.7,3.5,2.7,7.2,7.7,3.8,3.3,8.6,7.0,3.5,3.5,8.8,8.1,3.0,3.3,7.2,7.0,3.8,3.2,8.0,7.3,4.3,3.6,9.1,8.0,4.3,3.6,8.6,7.3,4.8,3.5,8.7,7.2,5.1,3.6,3.7,7.8,3.7,3.0,7.5]
        for (var i = 1; i < zmax; i++) {
            var m = zmax - i;
            /*$("#cengshuTd").append("" +
                "<input type='checkbox' checked='checked' id='show" + (m) + "'" +
                " class='floor' style='width: 20px;color:black;' onClick='checkshow(this.id);' />" +
                "<b class='floor'>第" + (i) + "层 </b><p></p>");*/

            $("#cengshuTd").append(
                '<input id="show'+(m)+'" type="checkbox" onClick="checkshow(this.id);" checked="checked" class="ace"/>' +
                '<span class="lbl"></span>' +
                "<span class='floor'>第" + (i) + "层 </span>"+
                '<p></p>' );

        }
        Init();
        // ZoomPicture(-1);
    });


    function random(vv) {
        return (Math.floor(Math.random() * vv));
    }

    var S, B;
    var viewerzoomed = 0, picturezoomed = 0;
    zPoly = new Array(n_x);
    for (i = 0; i < n_x; i++)
        zPoly[i] = new Array(35);


    function Init() {
        if (useSVG) {
            if (!SVGObjects[0]) {
                setTimeout("Init()", 100);
                return;
            }
            S = new Scene3D(SVGObjects[0], 0, 520, 410);
        } else {
            S = new Scene3D(document.getElementById("Scene1"), 1);
        }
        S.DiffuseLight = 0.8;                             //只有在0和1之间的时候包含0和1，默认是0.5，才可以使用S对象一一些主要的方法如：AutoCenter、ChangeViewer、Sort、Draw等。
        B = new BoundingBox(S, "#F0E68C", "#F08080");
        n_f = 0;

        var h, m, n;
        //判断显示/隐藏
        var showtemp = [];
        for (var i = 0; i < zmax - 1; i++) {
            showtemp.push(i);
        }

        var pArray = new Array();
        //pArray=message.split(",");
        /*for (h = 0; h < showtemp.length; h++) {
            var num = 0, max = 0, min = 100, sum = 0;
            try {
                for (m = 0; m < ymax; m++) {
                    for (n = 0; n < xmax; n++) {
                        zPoly[h][n + xmax * m] = new Poly3D(S, "#FF0000", "#FFFFFF", "#000000", 1);
                        zPoly[h][n + xmax * m].AddPoint(n, (m + 1), showtemp[h] + 1);
                        zPoly[h][n + xmax * m].AddPoint((n + 1), (m + 1), showtemp[h] + 1);
                        zPoly[h][n + xmax * m].AddPoint((n + 1), m, showtemp[h] + 1);
                        zPoly[h][n + xmax * m].AddPoint(n, m, showtemp[h] + 1);
                        //zPoly[h][n + xmax * m].SetEventAction("mouseover",parent.show);
                        //zPoly[h][n + xmax * m].SetEventAction("mouseout",parent.hid);
                        zPoly[h][n + xmax * m].Id = arraylist[n + xmax * m];
                        if (Number(arraylist[(zmax - h - 2) * xmax * ymax + n + xmax * m]) > max)
                            max = Number(arraylist[(zmax - h - 2) * xmax * ymax + n + xmax * m]);
                        if (Number(arraylist[(zmax - h - 2) * xmax * ymax + n + xmax * m]) < min)
                            min = Number(arraylist[(zmax - h - 2) * xmax * ymax + n + xmax * m]);
                        var tempnumber = Number(arraylist[(zmax - h - 2) * xmax * ymax + n + xmax * m]);
                        if (tempnumber != undefined && !isNaN(tempnumber)) {
                            sum += tempnumber;
                            num++;
                        }
                        zPoly[h][n + xmax * m].Update();

                    }
                }
            } catch (e) {
            }
            if (num > 0 && !isNaN(sum))
                $("#pingjunwen").append("<span>" + (sum / num).toFixed(2) + "</span><p></p>");
            else
                $("#pingjunwen").append("<span style='color:black;'>*</span><p></p>");
            if (max > 50) {
                $("#zuigaowen").append("<span style='color: red;' class='floor'>*</span><p></p>");
            } else if (50 > max && max > 0)
                $("#zuigaowen").append("<span style='color:#FF7F24;'>" + max + "</span><p></p>");
            else
                $("#zuigaowen").append("<span style='color: red;' class='floor'>*</span><p></p>");
            if (min < 0) {
                $("#zuidiwen").append("<span style='color:blue;'>*</span><p></p>");
            } else if (0 < min && min < 100) {
                $("#zuidiwen").append("<span style='color:blue;'>" + min + "</span><p></p>");
            } else
                $("#zuidiwen").append("<span style='color:blue;'>*</span><p></p>");
        }*/

        for (h = 0; h <  showtemp.length; h++) {  // h 0 m 0 n 0
            var num = 0, max = 0, min = 100, sum = 0;
            try {
                for (m = 0; m < ymax; m++) {
                    for (n = 0; n <  xmax; n++) {
                        //0 0
                        zPoly[h][n + xmax * m] = new Poly3D(S, "#FF0000", "#FFFFFF", "#000000", 1);
                        //
                        zPoly[h][n + xmax * m].AddPoint(n, (m + 1), showtemp[h] + 1);
                        zPoly[h][n + xmax * m].AddPoint((n + 1), (m + 1), showtemp[h] + 1);
                        zPoly[h][n + xmax * m].AddPoint((n + 1), m, showtemp[h] + 1);
                        zPoly[h][n + xmax * m].AddPoint(n, m, showtemp[h] + 1);
                        //zPoly[h][n + xmax * m].SetEventAction("mouseover",parent.show);
                        //zPoly[h][n + xmax * m].SetEventAction("mouseout",parent.hid);
                        zPoly[h][n + xmax * m].Id = arraylist[n + xmax * m];
                        if (Number(arraylist[(zmax - h - 2) * xmax * ymax + n + xmax * m]) > max)
                            max = Number(arraylist[(zmax - h - 2) * xmax * ymax + n + xmax * m]);
                        if (Number(arraylist[(zmax - h - 2) * xmax * ymax + n + xmax * m]) < min)
                            min = Number(arraylist[(zmax - h - 2) * xmax * ymax + n + xmax * m]);
                        var tempnumber = Number(arraylist[(zmax - h - 2) * xmax * ymax + n + xmax * m]);
                        if (tempnumber != undefined && !isNaN(tempnumber)) {
                            sum += tempnumber;
                            num++;
                        }
                        zPoly[h][n + xmax * m].Update();

                    }
                }
            } catch (e) {
            }
            if (num > 0 && !isNaN(sum))
                $("#pingjunwen").append("<span>" + (sum / num).toFixed(2) + "</span><p></p>");
            else
                $("#pingjunwen").append("<span style='color:black;'>*</span><p></p>");
            if (max > 50) {
                $("#zuigaowen").append("<span style='color: red;' class='floor'>*</span><p></p>");
            } else if (50 > max && max > 0)
                $("#zuigaowen").append("<span style='color:#FF7F24;'>" + max + "</span><p></p>");
            else
                $("#zuigaowen").append("<span style='color: red;' class='floor'>*</span><p></p>");
            if ( min >- 100&&min < 0) {
                $("#zuidiwen").append("<span style='color:blue;'>" + min + "</span><p></p>");
            } else if (0 < min && min < 100) {
                $("#zuidiwen").append("<span style='color:blue;'>" + min + "</span><p></p>");
            } else
                $("#zuidiwen").append("<span style='color:blue;'>*</span><p></p>");
        }

        S.AutoCenter();
        B.SetBorder(xmin, ymin, zmin, xmax, ymax, zmax);
        S.ChangeViewer(-50, -270);
        S.ChangeLight(-30, 30);
        S.OrderWeight.z = 0.01;
        S.Sort();
        S.ZoomAll*=1.3;
        S.Draw();

    }

    function shows(evt) {
        evt.target.setAttribute("style", "stroke-width:3.2;stroke:red;stroke-opacity:0.9;");
        evt.target.setAttribute("fill", "red");
        evt.target.nextSibling.setAttribute("fill", "#FFD700");
        evt.target.nextSibling.setAttribute("font-size", "13.5px");
        evt.target.nextSibling.setAttribute("font-weight", "900");

        var obj = evt.target;
        var a1;
        for (q1 = 0; q1 < S.Shape.length; q1++) {
            if (obj == S.Shape[q1]) {
                var os = zPoly[parseInt(q1 / 25)][q1 % 25];

            }
        }


    }

    /**
     *算颜色
     */
    function findrgb(val) {
        var r = 0;
        var g = 0;
        var b = 0;

        if (val < 10) {
            r = 150;
            g = 255;
            b = 0;
        } else if (val >= 10 && val < 15) {
            r = 73;
            g = 193;
            b = 0;
        } else if (val >= 15 && val < 20) {
            r = 0;
            g = 181;
            b = 223;
        } else if (val >= 20 && val < 25) {
            r = 241;
            g = 255;
            b = 121;
        } else if (val >= 25 && val < 30) {
            r = 255;
            g = 228;
            b = 0;
        } else if (val >= 30 && val < 35) {
            r = 255;
            g = 138;
            b = 0;
        } else if (val >= 35) {
            r = 255;
            g = 0;
            b = 0;
        } else if (val == "-") {
            r = 255;
            g = 255;
            b = 255;
        } else if (val == "备用") {
            r = 255;
            g = 255;
            b = 255;
        }
        //return "rgb("+r.toFixed(1)+"%,"+g.toFixed(1)+"%,"+b.toFixed(1)+"%)";
        return "rgb(" + r + "," + g + "," + b + ")";
    }

    function test() {
        alert("df");
    };

    function UpdateFunction(id) {
        var h = Number(id.substr(4)) - 1, m, n;
        for (var i = 0; i < zPoly[h].length; i++) {
            if (zPoly[h][i]) {
                zPoly[h][i].Visibility = document.getElementById(id).checked ? "visible"
                    : "hidden";
                //zPoly[h][i].Update();
            }
        }
        S.Sort();
        S.Draw();
    }

    function SelectFunction(nn) {
        if ((nn == 0) || (nn == 1)) {
            document.forms[0].xmin.value = -1;
            document.forms[0].xmax.value = 1;
            document.forms[0].ymin.value = -1;
            document.forms[0].ymax.value = 1;
        } else {
            document.forms[0].xmin.value = -5;
            document.forms[0].xmax.value = 5;
            document.forms[0].ymin.value = -5;
            document.forms[0].ymax.value = 5;
        }
        if (nn == 0)
            document.forms[0].z.value = "x*x-y*y";
        if (nn == 1)
            document.forms[0].z.value = "4*x*x+4*y*y";
        if (nn == 2)
            document.forms[0].z.value = "(cos(x)+cos(y))/(4+abs(x)+abs(y))";
        if (nn == 3)
            document.forms[0].z.value = "10-abs(x)-abs(y)";
        UpdateFunction();
    }

    function f(xx, yy) {
        x = xx;
        y = yy;
        var ff;
        ff = EvalSafe(document.forms[0].z.value);
        return (ff);
    }

    function EvalSafe(ss) {
        var jj = "";
        if (ss.indexOf("^") >= 0)
            return ("");
        try {
            with (Math)
                jj = eval(ss);
        } catch (error) {
            return ("");
        }
        return (jj);
    }

    function ChangeViewer(ttheta, ffi) {
        S.ChangeViewer(ttheta, ffi);
        S.Sort();
        S.Draw();
    }

    function ChangeLight(ttheta, ffi) {
        S.ChangeLight(ttheta, ffi);
        S.Draw();
    }

    function ZoomViewer(vv) {
        if ((viewerzoomed + vv > 5) || (viewerzoomed + vv < -5))
            return;
        viewerzoomed += vv;
        if (vv > 0)
            S.Dist *= 0.8;
        else
            S.Dist /= 0.8;
        S.Sort();
        S.Draw();
    }

    function Shift(hh, vv) {
        S.XM += hh;
        S.YM += vv;
        S.Draw();
    }

    function ZoomPicture(vv) {
        if ((picturezoomed + vv > 5) || (picturezoomed + vv < -5))
            return;
        picturezoomed += vv;
        if (vv > 0)
            S.ZoomAll *= 1.1;
        else
            S.ZoomAll /= 1.1;
        S.Draw();
    }

    var isRotating = false;
    var a;

    function clickxuanzhuan() {
        if (isRotating) {
            isRotating = false;
            //document.getElementById("xuanzhuan").innerHTML = "旋转";
            clearInterval(a);
        } else {
            isRotating = true;
            //document.getElementById("xuanzhuan").innerHTML = "停止";
            Rotate();
            a = setInterval("Rotate()", 200);
        }
    }

    function Rotate() {
        S.ChangeViewer(0, -5);
        S.ChangeLight(0, -5);
        S.Sort();
        S.Draw();
    }

    function checkshow(id) {
        UpdateFunction(id);

    }

    /**
     *查询某个批次的粮温---jt
     */
    function chaxungraintemp() {
        if ($("#pici").val() == 0) {
            alert("抱歉！请选择一个有效的批次！");
            return;
        } else {

            $.ajaxSetup({async: false});//设置jquery的ajax属性为同步，即执行完ajax才执行下面的代码---qlj

            $.post("lq_find3DData3", {
                "siteid": $("#siteid").val(),
                "xh": $("#xh").val(),
                "pici": $("#pici").val()
            }, function (data) {
                arraylist = data['measvalues'];
                ZoomPicture(-1);
                ZoomPicture(1);
                var moniValue = data["moniValue"];
                var grainTemp = data["grainTemp"];
                if (moniValue.qw < 50 && moniValue.qw > -50) {
                    $("#qw").html(moniValue.qw + "℃");
                } else if (moniValue.qw > 50 || moniValue.qw < -50) {
                    $("#qw").html("备用");
                } else {
                    $("#qw").html("");
                }
                if (moniValue.qs < 200 && moniValue.qs > 0) {
                    $("#qs").html(moniValue.qs + "%");
                } else if (moniValue.qs > 200 || moniValue.qs < 0) {
                    $("#qs").html("备用");
                } else {
                    $("#qw").html("");
                }
                if (moniValue.cw < 100 && moniValue.cw > -100) {
                    $("#cw").html(moniValue.cw + "℃");
                } else if (moniValue.cw > 100 || moniValue.cw < -100) {
                    $("#cw").html("备用");
                } else {
                    $("#cw").html("");
                }
                if (moniValue.cs < 200 && moniValue.cs > 0) {
                    $("#cs").html(moniValue.cs + "%");
                } else if (moniValue.cs > 200 || moniValue.cs < 0) {
                    $("#cs").html("备用");
                } else {
                    $("#cs").html("");
                }
                if (grainTemp.maxtemp > 50) {
                    $("#maxLw").html("备用");
                } else {
                    $("#maxLw").html(grainTemp.maxtemp + "℃");
                }
                alert(grainTemp.mintemp);
                if (grainTemp.mintemp < -10) {
                    alert(1);
                    $("#minLw").html("备用");
                } else {
                    alert(2);
                    $("#minLw").html(grainTemp.mintemp + "℃");
                }
                $("#avgLw").html(grainTemp.avgLw + "℃");
            }, "json");
            zmax = parseInt(item.z) + 1;
            $("#pingjunwen").html("<b style=''>平均温&nbsp&nbsp&nbsp&nbsp</b><p></p>");
            $("#zuigaowen").html("<b style='color: #FF7F24;'>最高温&nbsp&nbsp&nbsp&nbsp</b><p></p>");
            $("#zuidiwen").html("<b style='color: blue;'>最低温</b><p></p>");
            for (var i = zmax - 1; i >= 1; i--) {
                $.ajaxSetup({async: false});
                $.post(
                    "lq_tocengwen",
                    {
                        "zint": i,
                        "xh": $("#xh").val(),
                        "pici": $("#pici").val()
                    }, function (data) {
                        var temp = data["grainTemp"];
                        $("#pingjunwen").append("<b style='color:black;' class='floor'>" + temp.avgValue + "</b><p></p>");
                        if (temp.maxValue > 50) {
                            $("#zuigaowen").append("<b style='color: red;' class='floor'>备用</b><p></p>");
                        } else {
                            $("#zuigaowen").append("<b style='color: red;' class='floor'>" + temp.maxValue + "</b><p></p>");
                        }
                        if (temp.minValue < -10) {
                            $("#zuidiwen").append("<b style='color: blue;' class='floor'>备用</b><p></p>");
                        } else {
                            $("#zuidiwen").append("<b style='color: blue;' class='floor'>" + temp.minValue + "</b><p></p>");
                        }
                    }, "json");
            }


        }
    }

</script>
</html>
