<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:replace="head::head(${title})">
</head>
<link th:href="@{/assets/css/select/bootstrap-select.min.css}" rel="stylesheet" media="screen">
<script th:src="@{/assets/js/select/bootstrap-select.js}"></script>
<script th:src="@{/assets/js/select/defaults-zh_CN.js}"></script>
<link th:href="@{/assets/js/uploadify/uploadify.css}" rel="stylesheet" type="text/css">
<script th:src="@{/assets/js/uploadify/jquery.uploadify.js}"></script>


<body style="overflow-x: hidden">
<form class="form-horizontal" role="form" id="validation-form" method="get">
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="billcode">
            单据号:
        </label>
        <div class="col-sm-4">
            <input type="text" name="billcode" id="billcode" class="form-control"
                   th:value="${item.billcode}" readonly
                   placeholder="单据号"/>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="drgvender">
            药剂供应商:
        </label>
        <div class="col-sm-4">
            <input type="text" name="drgvender" id="drgvender" class="form-control"
                   th:value="${item.drgvender}"
                   placeholder="药剂供应商"/>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="indatestr">
            入库日期:
        </label>
        <div class="col-sm-4">
            <input size="16" type="text" name="indatestr" id="indatestr"
                   th:value="${item.indatestr}"
                   readonly class="form_date form-control"></div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="intype">
            入库类型:
        </label>
        <div class="col-sm-4">
            <select id="intype" name="intype" class="form-control"
                    th:value="${item.intype}">
            </select>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="repuser">
            经办人:
        </label>
        <div class="col-sm-4">
            <input type="text" name="repuser" id="repuser" class="form-control"
                   th:value="${item.repuser}"
                   placeholder="经办人"/>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="checkresult">
            验收结果:
        </label>
        <div class="col-sm-4">
            <input type="text" name="checkresult" id="checkresult" class="form-control"
                   th:value="${item.checkresult}"
                   placeholder="验收结果"/>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="checkuser1">
            验收人1:
        </label>
        <div class="col-sm-4">
            <input type="text" name="checkuser1" id="checkuser1" class="form-control"
                   th:value="${item.checkuser1}"
                   placeholder="验收人1"/>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="checkuser2">
            验收人2:
        </label>
        <div class="col-sm-4">
            <input type="text" name="checkuser2" id="checkuser2" class="form-control"
                   th:value="${item.checkuser2}"
                   placeholder="验收人2"/>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="checkuser3">
            验收人3:
        </label>
        <div class="col-sm-4">
            <input type="text" name="checkuser3" id="checkuser3" class="form-control"
                   th:value="${item.checkuser3}"
                   placeholder="验收人3"/>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="checkuser4">
            验收人4:
        </label>
        <div class="col-sm-4">
            <input type="text" name="checkuser4" id="checkuser4" class="form-control"
                   th:value="${item.checkuser4}"
                   placeholder="验收人4"/>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="checkuser5">
            验收人5:
        </label>
        <div class="col-sm-4">
            <input type="text" name="checkuser5" id="checkuser5" class="form-control"
                   th:value="${item.checkuser5}"
                   placeholder="验收人5"/>
        </div>
    </div>

    <div class="form-group">
        <div class="col-md-6 center">
            <button class="btn btn-info" type="submit">
                <i class="icon-ok bigger-110"></i>
                保存
            </button>
            &nbsp; &nbsp; &nbsp;
            <button class="btn" type="button" onclick="toBack()">
                <i class="icon-arrow-left bigger-110"></i>
                返回
            </button>
        </div>
    </div>

</form>

</body>
</html>
<script th:inline="javascript">
    var urlPrefix="/graindepot-bussiness";
    //var urlPrefix = "";
    var g_id = [[${id}]];
    var g_item = [[${item}]];
    var param={};
    $(function () {
        //初始化时间框
        $(".form_date").bootstrapDate();
        //初始化form验证
        initForm();
        //初始化下拉框
        initIntype()
    });

    function initIntype() {
        var data = [{value: 1, text: "采购入库"}, {value: 2, text: "调拨入库"}];
        $("#intype").bootstrapSelect({
            data: data,
            valueField: 'value',
            textField: 'text'
        });
    }


    function toBack() {
        parent.$.bootstrapBox.dialog.close();
    }

    function initForm() {
        $('#validation-form').bootstrapValidator().on('success.form.bv', function (e) {
            // 组织表单提交改为ajax提交
            e.preventDefault();
            var param = turnArrayToJson($('form').serializeArray());
            if (g_id) {
                param.billid = g_id
            }
            $.post(urlPrefix + "/druginstore/edit", param, function (result) {
                parent.toSave(result)
            })
        });
    }


</script>