<!DOCTYPE html><html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"><head th:replace="head::head(${title})"></head><link th:href="@{/assets/css/select/bootstrap-select.min.css}" rel="stylesheet" media="screen"><script th:src="@{/assets/js/select/bootstrap-select.js}"></script><script th:src="@{/assets/js/select/defaults-zh_CN.js}"></script><link th:href="@{/assets/js/uploadify/uploadify.css}" rel="stylesheet" type="text/css"><script th:src="@{/assets/js/uploadify/jquery.uploadify.js}"></script><body style="overflow-x: hidden"><form class="form-horizontal" role="form" id="validation-form" method="get">    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="truckcode">            车辆编码:        </label> <div class="col-sm-4">        <input type="text" name="truckcode" id="truckcode" class="form-control"               th:value="${item.truckcode}"               placeholder="车辆编码"/>    </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="trucknum">            车船号:        </label> <div class="col-sm-4">        <input type="text" name="trucknum" id="trucknum" class="form-control"               th:value="${item.trucknum}"               placeholder="车船号"/>    </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="mintare">            最小皮重:        </label> <div class="col-sm-4">        <input type="text" name="mintare" id="mintare" class="form-control"               th:value="${item.mintare}"               placeholder="最小皮重"/>    </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="maxtare">            最大皮重:        </label> <div class="col-sm-4">        <input type="text" name="maxtare" id="maxtare" class="form-control"               th:value="${item.maxtare}"               placeholder="最大皮重"/>    </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="stdtare">            标准皮重:        </label> <div class="col-sm-4">        <input type="text" name="stdtare" id="stdtare" class="form-control"               th:value="${item.stdtare}"               placeholder="标准皮重"/>    </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="remark">            备注:        </label> <div class="col-sm-4">        <input type="text" name="remark" id="remark" class="form-control"               th:value="${item.remark}"               placeholder="备注"/>    </div>    </div>    <div class="form-group">        <div class="col-md-12 center">            <button class="btn btn-info" type="submit">                <i class="icon-ok bigger-110"></i>                保存            </button>            &nbsp; &nbsp; &nbsp;            <button class="btn" type="button" onclick="toBack()">                <i class="icon-arrow-left bigger-110"></i>                返回            </button>        </div>    </div></form></body></html><script th:inline="javascript">    var urlPrefix="/graindepot-bussiness";    //var urlPrefix = "";    var g_id = [[${id}]];    var g_item = [[${item}]];    $(function () {        //初始化form验证        initForm();    });    function toBack() {        parent.$.bootstrapBox.dialog.close();    }    //填写表单    function initForm() {        $('#validation-form').bootstrapValidator({            fields: {                trucknum: {                    validators: {                        remote: {                            url: urlPrefix + '/truck/checkRepeat',                            message: '车船号已存在',//提示消息                            //delay :  2000,//每输入一个字符，就发ajax请求，服务器压力还是太大，设置2秒发送一次ajax（默认输入一个字符，提交一次，服务器压力太大）                            type: 'POST',//请求方式                            data: function (validator) {                                return {                                    trucknum: $("#trucknum").val(),                                    truckid: g_id                                };                            }                        }                    }                }            }        }).on('success.form.bv', function (e) {            // Prevent form submission            e.preventDefault();            var param = turnArrayToJson($('form').serializeArray());            if (g_id) {                param.truckid = g_id            }            $.post(urlPrefix + "/truck/edit", param, function (result) {                parent.toSave(result)            })        });    }</script>