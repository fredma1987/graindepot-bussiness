<!DOCTYPE html><html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"><head th:replace="head::head(${title})"></head><link th:href="@{/assets/css/select/bootstrap-select.min.css}" rel="stylesheet" media="screen"><script th:src="@{/assets/js/select/bootstrap-select.js}"></script><script th:src="@{/assets/js/select/defaults-zh_CN.js}"></script><link th:href="@{/assets/js/uploadify/uploadify.css}" rel="stylesheet" type="text/css"><script th:src="@{/assets/js/uploadify/jquery.uploadify.js}"></script><body style="overflow-x: hidden"><form class="form-horizontal" role="form" id="validation-form" method="get">    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="billcode">            单据号:        </label>        <div class="col-sm-4">            <input type="text" name="billcode" id="billcode" class="form-control"                   th:value="${item.billcode}"                   placeholder="单据号"/>        </div>    </div>    <!--<div class="form-group">-->        <!--<label class="col-sm-4 control-label no-padding-right" for="billdatestr">-->            <!--单据日期:-->        <!--</label>-->        <!---->        <!--<div class="col-sm-4">-->            <!--<input size="16" type="text" name="billdatestr" id="billdatestr"-->                   <!--th:value="${item.billdatestr}"-->                   <!--readonly class="form_date form-control">-->        <!--</div>-->    <!--</div>-->    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="billkind">            移库类型:        </label>        <div class="col-sm-4">            <select id="billkind" name="billkind" class="form-control"                    th:value="${item.billkind}">            </select>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="billkind">            单据状态:        </label>        <div class="col-sm-4">            <select id="billstate" name="billstate" class="form-control"                    th:value="${item.billstate}">            </select>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="outstorageid">            调出粮仓:        </label>        <div class="col-sm-4">            <input type="text" name="outstorageid" id="outstorageid" class="form-control"                   th:value="${item.outstorageid}"                   placeholder="调出粮仓"/>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="instorageid">            调入粮仓:        </label>        <div class="col-sm-4">            <input type="text" name="instorageid" id="instorageid" class="form-control"                   th:value="${item.instorageid}"                   placeholder="调入粮仓"/>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="grainid">            <span class="red">*</span>粮食品种:        </label>        <div class="col-sm-4">            <select id="grainid" name="grainid" class="form-control"                    data-bv-notempty th:value="${item.grainid}">            </select>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="grainattrid">            粮食性质:        </label>        <div class="col-sm-4">            <select id="grainattrid" name="grainattrid" class="form-control"                    th:value="${item.grainattrid}">            </select>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="producingyear">            收获年度:        </label>        <!--<div class="col-sm-4">-->            <!--<select id="producingyear" name="producingyear" class="form_year form-control"-->                    <!--th:value="${item.producingyear}">-->            <!--</select>-->        <!--</div>-->        <div class="col-sm-4">            <input size="16" type="text" name="producingyear" id="producingyear"                   th:value="${item.producingyear}"                   readonly class="form_year form-control">        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="facqty">            实际数量:        </label>        <div class="col-sm-4">            <input type="text" name="facqty" id="facqty" class="form-control"                   th:value="${item.facqty}"                   placeholder="实际数量"/>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="waterrate">            水分率:        </label>        <div class="col-sm-4">            <input type="text" name="waterrate" id="waterrate" class="form-control"                   th:value="${item.waterrate}"                   placeholder="水分率"/>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="waterdedurate">            水分扣率:        </label>        <div class="col-sm-4">            <input type="text" name="waterdedurate" id="waterdedurate" class="form-control"                   th:value="${item.waterdedurate}"                   placeholder="水分扣率"/>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="waterdeduqty">            水分扣量:        </label>        <div class="col-sm-4">            <input type="text" name="waterdeduqty" id="waterdeduqty" class="form-control"                   th:value="${item.waterdeduqty}"                   placeholder="水分扣量"/>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="impurate">            杂质率:        </label>        <div class="col-sm-4">            <input type="text" name="impurate" id="impurate" class="form-control"                   th:value="${item.impurate}"                   placeholder="杂质率"/>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="impudedurate">            杂质扣率:        </label>        <div class="col-sm-4">            <input type="text" name="impudedurate" id="impudedurate" class="form-control"                   th:value="${item.impudedurate}"                   placeholder="杂质扣率"/>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="impudeduqty">            杂质扣量:        </label>        <div class="col-sm-4">            <input type="text" name="impudeduqty" id="impudeduqty" class="form-control"                   th:value="${item.impudeduqty}"                   placeholder="杂质扣量"/>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="allotqty">            结算数量:        </label>        <div class="col-sm-4">            <input type="text" name="allotqty" id="allotqty" class="form-control"                   th:value="${item.allotqty}"                   placeholder="结算数量"/>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="allotreason">            移库原因:        </label>        <div class="col-sm-4">            <input type="text" name="allotreason" id="allotreason" class="form-control"                   th:value="${item.allotreason}"                   placeholder="移库原因"/>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="grossweight">            毛重:        </label>        <div class="col-sm-4">            <input type="text" name="grossweight" id="grossweight" class="form-control"                   th:value="${item.grossweight}"                   placeholder="毛重"/>        </div>    </div>    <!--<div class="form-group">-->    <!--<label class="col-sm-4 control-label no-padding-right" for="gwopid">-->    <!--称毛重操作员:-->    <!--</label> <div class="col-sm-4">-->    <!--<input type="text" name="gwopid" id="gwopid" class="form-control"-->    <!--th:value="${item.gwopid}"-->    <!--placeholder="称毛重操作员"/>-->    <!--</div>-->    <!--</div>-->    <!--<div class="form-group">-->    <!--<label class="col-sm-4 control-label no-padding-right" for="gwsate">-->    <!--称毛重状态（1：已称重）:-->    <!--</label> <div class="col-sm-4">-->    <!--<select id="gwsate" name="gwsate" class="form-control"-->    <!--th:value="${item.gwsate}">-->    <!--</select>-->    <!--</div>-->    <!--</div>-->    <!--<div class="form-group">-->    <!--<label class="col-sm-4 control-label no-padding-right" for="gwtimestr">-->    <!--称毛重时间:-->    <!--</label>-->    <!--<div class="col-sm-4">-->    <!--<input size="16" type="text" name="gwtimestr" id="gwtimestr"-->    <!--th:value="${item.gwtimestr}"-->    <!--readonly class="form_date form-control"></div>-->    <!--</div>-->    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="tareweight">            皮重:        </label>        <div class="col-sm-4">            <input type="text" name="tareweight" id="tareweight" class="form-control"                   th:value="${item.tareweight}"                   placeholder="皮重"/>        </div>    </div>    <!--<div class="form-group">-->    <!--<label class="col-sm-4 control-label no-padding-right" for="tareopid">-->    <!--称皮重操作员:-->    <!--</label>-->    <!--<div class="col-sm-4">-->    <!--<input type="text" name="tareopid" id="tareopid" class="form-control"-->    <!--th:value="${item.tareopid}"-->    <!--placeholder="称皮重操作员"/>-->    <!--</div>-->    <!--</div>-->    <!--<div class="form-group">-->    <!--<label class="col-sm-4 control-label no-padding-right" for="tarestate">-->    <!--称皮重状态（1：已称重）:-->    <!--</label>-->    <!--<div class="col-sm-4">-->    <!--<select id="tarestate" name="tarestate" class="form-control"-->    <!--th:value="${item.tarestate}">-->    <!--</select>-->    <!--</div>-->    <!--</div>-->    <!--<div class="form-group">-->    <!--<label class="col-sm-4 control-label no-padding-right" for="taretimestr">-->    <!--称皮重时间:-->    <!--</label>-->    <!--<div class="col-sm-4">-->    <!--<input size="16" type="text" name="taretimestr" id="taretimestr"-->    <!--th:value="${item.taretimestr}"-->    <!--readonly class="form_date form-control"></div>-->    <!--</div>-->    <!--<div class="form-group">-->    <!--<label class="col-sm-4 control-label no-padding-right" for="weightype">-->    <!--称重类型(0：不称重，1：只称毛重不称皮重，2：既称毛重又称皮重):-->    <!--</label>-->    <!--<div class="col-sm-4">-->    <!--<select id="weightype" name="weightype" class="form-control"-->    <!--th:value="${item.weightype}">-->    <!--</select>-->    <!--</div>-->    <!--</div>-->    <!--<div class="form-group">-->        <!--<label class="col-sm-4 control-label no-padding-right" for="truckid">-->            <!--内部车辆主键:-->        <!--</label>-->        <!--<div class="col-sm-4">-->            <!--<input type="text" name="truckid" id="truckid" class="form-control"-->                   <!--th:value="${item.truckid}"-->                   <!--placeholder="内部车辆主键"/>-->        <!--</div>-->    <!--</div>-->    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="trucknum">            车船号:        </label>        <div class="col-sm-4">            <input type="text" name="trucknum" id="trucknum" class="form-control"                   th:value="${item.trucknum}"                   placeholder="车船号"/>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="packageid">            包装物:        </label>        <div class="col-sm-4">            <select id="packageid" name="packageid" class="form-control"                    th:value="${item.packageid}">            </select>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="packqty">            包装物数量:        </label>        <div class="col-sm-4">            <input type="text" name="packqty" id="packqty" class="form-control"                   th:value="${item.packqty}"                   placeholder="包装物数量"/>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="packunitwgt">            包装单件重量:        </label>        <div class="col-sm-4">            <input type="text" name="packunitwgt" id="packunitwgt" class="form-control"                   th:value="${item.packunitwgt}"                   placeholder="包装单件重量"/>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="packweight">            包装物总重量:        </label>        <div class="col-sm-4">            <input type="text" name="packweight" id="packweight" class="form-control"                   th:value="${item.packweight}"                   placeholder="包装物总重量"/>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="packtype">            包装方式:        </label>        <div class="col-sm-4">            <select id="packtype" name="packtype" class="form-control"                    th:value="${item.packtype}">            </select>        </div>    </div>    <div class="form-group">        <label class="col-sm-4 control-label no-padding-right" for="remark">            备注:        </label>        <div class="col-sm-4">            <input type="text" name="remark" id="remark" class="form-control"                   th:value="${item.remark}"                   placeholder="备注"/>        </div>    </div>    <div class="form-group">        <div class="col-md-12 center">            <button class="btn btn-info" type="submit">                <i class="icon-ok bigger-110"></i>                保存            </button>            &nbsp; &nbsp; &nbsp;            <button class="btn" type="button" onclick="toBack()">                <i class="icon-arrow-left bigger-110"></i>                返回            </button>        </div>    </div></form></body></html><script th:inline="javascript">    var urlPrefix = "/graindepot-bussiness";    //var urlPrefix = "";    var g_id = [[${id}]];    var g_item = [[${item}]];    $(function () {        //初始化form验证        initForm();        //初始化日期时间框        $(".form_year").bootstrapYear();        //$(".form_datetime").bootstrapDatetime();        $(".form_date").bootstrapDate();        //初始化下拉框        //1.初始化移库类型        initBillKind();        //2.初始化包装物        initPackageid();        //3.初始化包装方式        initPacktype();        //4.初始化粮食品种下拉框        initGrainid();        //5.初始化粮食性质下拉框        initGrainattrid();        //6.初始化单据下拉框        initBillstate();    });    function initBillKind() {        var data = [{value: 1, text: "单据移库"}, {value: 2, text: "检斤移库"}];        $("#billkind").bootstrapSelect({            //url: '/tableListPost',            // type: 'POST',            data: data,            valueField: 'value',            textField: 'text',            defaultValue: g_item.billkind        });    }    function initPackageid() {        var data = [{value: 1, text: "编织袋"}, {value: 2, text: "麻袋"}, {value: 99, text: "其他"}];        $("#packageid").bootstrapSelect({            //url: '/tableListPost',            // type: 'POST',            data: data,            valueField: 'value',            textField: 'text',            defaultValue: g_item.packageid        });    }    function initPacktype() {        var data = [{value: 0, text: "散装"}, {value: 1, text: "包装"}];        $("#packtype").bootstrapSelect({            // url: '/graindepot-base/grain',            // type: 'GET',            data: data,            valueField: 'value',            textField: 'text',            defaultValue: g_item.packtype        });    }    function initBillstate() {        var data = [{value: 0, text: "编辑"}, {value: 1, text: "已审核"}, {value: -1, text: "已作废"}];        $("#billstate").bootstrapSelect({            // url: '/graindepot-base/grain',            // type: 'GET',            data: data,            valueField: 'value',            textField: 'text',            defaultValue: g_item.billstate        });    }    function initGrainid() {        $("#grainid").bootstrapSelect({            url: '/graindepot-base/selector/grainList',            type: 'GET',            valueField: 'grainid',            textField: 'grainname',            defaultValue: g_item.grainid,        });    }    function initGrainattrid() {        $("#grainattrid").bootstrapSelect({            url: '/graindepot-base/selector/grainattrList',            type: 'GET',            valueField: 'grainattrid',            textField: 'grainattrname',            defaultValue: g_item.grainattrid        });    }    function toBack() {        parent.$.bootstrapBox.dialog.close();    }    //填写表单    function initForm() {        $('#validation-form').bootstrapValidator({            // fields: {            //     trucknum: {            //         validators: {            //             remote: {            //                 url: urlPrefix + '/truck/checkRepeat',            //                 message: '车船号已存在',//提示消息            //                 //delay :  2000,//每输入一个字符，就发ajax请求，服务器压力还是太大，设置2秒发送一次ajax（默认输入一个字符，提交一次，服务器压力太大）            //                 type: 'POST',//请求方式            //                 data: function (validator) {            //                     return {            //                         trucknum: $("#trucknum").val(),            //                         truckid: g_id            //                     };            //                 }            //             }            //         }            //     }            // }        }).on('success.form.bv', function (e) {            // Prevent form submission            e.preventDefault();            var param = turnArrayToJson($('form').serializeArray());            if (g_id) {                param.billid = g_id            }            $.post(urlPrefix + "/allot/edit", param, function (result) {                parent.toSave(result)            })        });    }</script>